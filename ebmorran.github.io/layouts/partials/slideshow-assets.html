<link rel="stylesheet" href="https://unpkg.com/swiper@10/swiper-bundle.min.css">
<script src="https://unpkg.com/swiper@10/swiper-bundle.min.js"></script>
<script>
window.addEventListener('load', function () {
  document.querySelectorAll('.ux-slideshow').forEach(function (host) {
    var swiperEl = host.querySelector('.swiper');
    var prevEl  = host.querySelector('.swiper-button-prev');
    var nextEl  = host.querySelector('.swiper-button-next');
    var pagEl   = host.querySelector('.swiper-pagination');
    var capEl   = host.querySelector('.ux-caption');

    function setCaption(sw) {
      // Always use Swiper's state, not DOM queries
      var slide = sw.slides[sw.activeIndex];
      var cap = (slide && slide.dataset && slide.dataset.caption) ? slide.dataset.caption : '';
      capEl.textContent = cap;
    }

    var sw = new Swiper(swiperEl, {
      slidesPerView: 1,
      spaceBetween: 0,
      autoHeight: false,
      keyboard: { enabled: true },
      navigation: { prevEl: prevEl, nextEl: nextEl },
      pagination: { el: pagEl, clickable: true },
      on: {
        init: setCaption,
        slideChange: setCaption,
        transitionEnd: setCaption   // ensures correctness after fast clicks/drags
      }
    });
  });
});
</script>


<style>
.ux-slideshow{position:relative;max-width:100%;margin:1rem 0;color:var(--text-color,#111)}
.ux-slideshow .swiper{width:100%;height:var(--slide-h,70vh)}
.ux-slideshow .swiper-wrapper{align-items:center}
.ux-slideshow .swiper-slide{height:100%;display:flex;align-items:center;justify-content:center}
.ux-slideshow img{display:block;height:100%;width:auto;max-width:100%;object-fit:contain;border-radius:12px}

/* Caption */
.ux-slideshow .ux-caption{margin-top:.6rem;text-align:center;font-size:1.05rem;font-style:italic;opacity:.9;min-height:1.4em}

/* Nav: transparent background (no boxes) + filled triangles in theme colors */
.ux-slideshow .swiper-button-prev,
.ux-slideshow .swiper-button-next{
  background:transparent !important;border:0 !important;box-shadow:none !important;
  width:44px;height:44px;z-index:20;pointer-events:auto
}
.ux-slideshow .swiper-button-prev::after,
.ux-slideshow .swiper-button-next::after{
  content:"" !important;display:block;width:0;height:0;margin:auto;border-style:solid
}
.ux-slideshow .swiper-button-next::after{
  border-width:12px 0 12px 18px;
  border-color:transparent transparent transparent var(--text-color,#6b7280)
}
.ux-slideshow .swiper-button-prev::after{
  border-width:12px 18px 12px 0;
  border-color:transparent var(--text-color,#6b7280) transparent transparent
}
.ux-slideshow .swiper-button-disabled{opacity:.3}

/* Pagination: use theme vars, with fallbacks */
.ux-slideshow .swiper-pagination-bullet{
  background:var(--text-secondary-color,#6b7280) !important; opacity:.35
}
.ux-slideshow .swiper-pagination-bullet-active{
  background:var(--primary-color,#2563eb) !important; opacity:1
}
/* Prevent text/image selection & iOS tap highlight inside the slideshow */
.ux-slideshow,
.ux-slideshow *{
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.ux-slideshow{
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}
/* Prevent image drag/ghost image; let Swiper capture the events */
.ux-slideshow img{
  -webkit-user-drag: none;
  user-drag: none;
  pointer-events: none;
}
/* (Optional) if you still want the caption text to be selectable, re-enable just here: */
/* .ux-slideshow .ux-caption{ user-select: text; } */

/* Belt-and-suspenders: remove any selection color if a UA still paints it */
.ux-slideshow ::selection{ background: transparent; color: inherit; }
.ux-slideshow ::-moz-selection{ background: transparent; color: inherit; }

</style>

